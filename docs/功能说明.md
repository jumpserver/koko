# KoKo 功能说明

## 这个能干嘛？

KoKo 是 JumpServer 的字符协议连接组件，作为堡垒机的核心终端服务，为用户提供安全的远程连接和管理能力。

## 核心功能

### 1. 多协议支持

KoKo 支持多种常用的远程连接协议：

#### SSH 连接
- 标准 SSH 协议连接
- 支持 SSH 密钥和密码认证
- 支持 SSH 自动登录和切换用户（su/sudo）
- 支持会话保持和重连
- 支持 SSH 端口转发（可选）
- 支持 VSCode Remote SSH 远程开发（可选）

#### SFTP 文件传输
- 完整的 SFTP 协议支持
- 文件上传/下载
- 目录浏览和管理
- 文件权限设置
- 支持显示/隐藏文件（可配置）
- 支持批量文件压缩下载（ZIP 格式）

#### Telnet 连接
- 标准 Telnet 协议连接
- 支持自动登录
- 支持切换用户

#### Kubernetes 连接
- Kubernetes 集群管理
- Pod 容器连接
- 支持 kubectl 命令行
- 支持多容器环境

#### 数据库协议
支持多种数据库的安全连接：
- MySQL
- Redis
- MongoDB
- PostgreSQL
- SQL Server
- Oracle
- 其他数据库（通过 usql 支持）

### 2. Web 终端

- 基于 WebSocket 的浏览器终端
- 无需安装客户端，浏览器直接访问
- 支持全屏模式
- 支持终端窗口大小调整
- 支持终端主题配置
- 支持快捷键操作
- 支持中文等多语言显示

### 3. Web 文件管理

- 基于 Web 的文件管理界面
- 可视化文件浏览
- 文件上传/下载
- 文件重命名、删除
- 目录创建和管理
- 文件搜索功能
- 批量操作支持

### 4. 会话管理

#### 会话录制
- 自动录制所有会话操作
- 支持 ASCII 格式录制（asciinema）
- 录像可回放查看
- 支持多种存储后端：
  - 本地存储
  - S3 对象存储
  - Azure Blob 存储
  - OSS 对象存储
  - OBS 对象存储
  - ElasticSearch
  - InfluxDB

#### 会话监控
- 实时会话列表
- 会话详细信息查看
- 在线用户监控
- 会话强制断开

#### 会话共享
- 支持多人共享同一会话
- 支持本地共享和 Redis 共享
- 实时协作功能

### 5. 安全审计

#### 命令审计
- 记录所有用户命令
- 命令历史查询
- 命令统计分析

#### 命令过滤
- 危险命令阻断
- 自定义命令黑名单
- 实时命令检查
- 命令风险提示

### 6. 连接优化

#### 连接复用
- 自动复用已建立的连接
- 减少认证次数
- 提高连接速度
- 用户连接隔离（不会复用其他用户的连接）

#### 心跳保持
- 定期发送心跳包
- 防止连接超时
- 可配置心跳间隔
- 可配置重试次数

### 7. 资产管理

#### 资产加载策略
- 异步加载：适合大规模资产
- 全量加载：适合小规模资产，支持本地快速搜索
- 灵活配置加载策略

#### 资产组织
- 树形结构展示
- 资产分组管理
- 支持资产搜索
- 支持资产过滤

### 8. 多语言支持

- 中文（简体）
- 英文
- 支持国际化（i18n）
- 可扩展其他语言

### 9. 高可用特性

#### 分布式部署
- 支持多实例部署
- 负载均衡
- 会话状态共享（Redis）

#### 日志管理
- 多级别日志（DEBUG, INFO, WARN, ERROR, FATAL, CRITICAL）
- 结构化日志输出
- 日志轮转

### 10. 其他特性

#### OpenAI 集成
- 支持 OpenAI API 集成
- 智能命令建议
- 命令解释

#### 文件传输优化
- ZModem 协议支持
- 支持断点续传
- 大文件传输优化

#### 网关支持
- 域名网关
- 多层跳板机
- 网络隔离环境访问

## 技术架构

- **后端**：使用 Go 语言开发，高性能、低资源占用
- **前端**：使用 Vue.js 开发，现代化 Web 界面
- **通信**：WebSocket 实时通信
- **存储**：支持多种存储后端
- **部署**：支持 Docker 容器化部署

## 使用场景

1. **IT 运维管理**：安全管理和访问服务器资源
2. **开发测试**：远程访问开发和测试环境
3. **数据库管理**：安全连接和管理数据库
4. **容器管理**：管理 Kubernetes 集群和容器
5. **审计合规**：满足操作审计和合规要求
6. **协作办公**：多人协作进行运维操作

## 配置灵活性

KoKo 提供丰富的配置选项，包括：
- 端口配置（SSH、HTTP、WebSocket）
- 超时设置
- 日志级别
- 存储配置
- Redis 集群配置
- 安全策略配置
- 性能优化配置

## 总结

KoKo 是一个功能强大、安全可靠的堡垒机终端组件，提供：
- ✅ 多协议支持（SSH、Telnet、K8s、数据库等）
- ✅ 完整的会话录制和审计
- ✅ Web 化的现代界面
- ✅ 灵活的部署方式
- ✅ 高性能和高可用
- ✅ 丰富的安全特性

无论是小型团队还是大型企业，KoKo 都能满足安全运维和审计合规的需求。
